<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Getting your data | Phylogenomics with SISRS</title>
  <meta name="description" content="Step-by-step guide for research using SISRS to get orthologs for phylogenomics." />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Getting your data | Phylogenomics with SISRS" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Step-by-step guide for research using SISRS to get orthologs for phylogenomics." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Getting your data | Phylogenomics with SISRS" />
  
  <meta name="twitter:description" content="Step-by-step guide for research using SISRS to get orthologs for phylogenomics." />
  

<meta name="author" content="Rachel Schwartz" />


<meta name="date" content="2024-10-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="computational-skills.html"/>
<link rel="next" href="phylogenetic-markers.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Phylogenomics Research Course</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#phylogenies"><i class="fa fa-check"></i><b>2.1</b> Phylogenies</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#resources"><i class="fa fa-check"></i><b>2.2</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="research.html"><a href="research.html"><i class="fa fa-check"></i><b>3</b> Research</a>
<ul>
<li class="chapter" data-level="3.1" data-path="research.html"><a href="research.html#selecting-a-group-to-study"><i class="fa fa-check"></i><b>3.1</b> Selecting a group to study</a></li>
<li class="chapter" data-level="3.2" data-path="research.html"><a href="research.html#learning-about-your-group"><i class="fa fa-check"></i><b>3.2</b> Learning about your group</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="research.html"><a href="research.html#finding-research-articles"><i class="fa fa-check"></i><b>3.2.1</b> Finding research articles</a></li>
<li class="chapter" data-level="3.2.2" data-path="research.html"><a href="research.html#reading-research-articles"><i class="fa fa-check"></i><b>3.2.2</b> Reading research articles</a></li>
<li class="chapter" data-level="3.2.3" data-path="research.html"><a href="research.html#reading-for-your-research"><i class="fa fa-check"></i><b>3.2.3</b> Reading for your research</a></li>
<li class="chapter" data-level="3.2.4" data-path="research.html"><a href="research.html#more-background-information"><i class="fa fa-check"></i><b>3.2.4</b> More background information</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="research.html"><a href="research.html#freewrite-assignment"><i class="fa fa-check"></i><b>3.3</b> Freewrite assignment</a></li>
<li class="chapter" data-level="3.4" data-path="research.html"><a href="research.html#annotated-bibliography-assignment"><i class="fa fa-check"></i><b>3.4</b> Annotated Bibliography assignment</a></li>
<li class="chapter" data-level="3.5" data-path="research.html"><a href="research.html#reflection-assignment"><i class="fa fa-check"></i><b>3.5</b> Reflection assignment</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="getting-data.html"><a href="getting-data.html"><i class="fa fa-check"></i><b>4</b> Getting Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="getting-data.html"><a href="getting-data.html#example-data-and-trees"><i class="fa fa-check"></i><b>4.1</b> Example data and trees</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="computational-skills.html"><a href="computational-skills.html"><i class="fa fa-check"></i><b>5</b> Computational skills</a>
<ul>
<li class="chapter" data-level="5.1" data-path="computational-skills.html"><a href="computational-skills.html#getting-access"><i class="fa fa-check"></i><b>5.1</b> Getting access</a></li>
<li class="chapter" data-level="5.2" data-path="computational-skills.html"><a href="computational-skills.html#log-in-to-the-server"><i class="fa fa-check"></i><b>5.2</b> Log in to the server</a></li>
<li class="chapter" data-level="5.3" data-path="computational-skills.html"><a href="computational-skills.html#basic-navigation"><i class="fa fa-check"></i><b>5.3</b> Basic navigation</a></li>
<li class="chapter" data-level="5.4" data-path="computational-skills.html"><a href="computational-skills.html#data-storage"><i class="fa fa-check"></i><b>5.4</b> Data storage</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="getting-your-data.html"><a href="getting-your-data.html"><i class="fa fa-check"></i><b>6</b> Getting your data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="getting-your-data.html"><a href="getting-your-data.html#download"><i class="fa fa-check"></i><b>6.1</b> Download</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="phylogenetic-markers.html"><a href="phylogenetic-markers.html"><i class="fa fa-check"></i><b>7</b> Phylogenetic markers</a>
<ul>
<li class="chapter" data-level="7.1" data-path="phylogenetic-markers.html"><a href="phylogenetic-markers.html#sisrs"><i class="fa fa-check"></i><b>7.1</b> SISRS</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="phylogenetic-markers.html"><a href="phylogenetic-markers.html#what-sisrs-does"><i class="fa fa-check"></i><b>7.1.1</b> What SISRS does</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="building-trees.html"><a href="building-trees.html"><i class="fa fa-check"></i><b>8</b> Building Trees</a>
<ul>
<li class="chapter" data-level="8.1" data-path="building-trees.html"><a href="building-trees.html#background-on-tree-building"><i class="fa fa-check"></i><b>8.1</b> Background on tree building</a></li>
<li class="chapter" data-level="8.2" data-path="building-trees.html"><a href="building-trees.html#building-trees-from-your-data"><i class="fa fa-check"></i><b>8.2</b> Building trees from your data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="building-trees.html"><a href="building-trees.html#likelihood"><i class="fa fa-check"></i><b>8.2.1</b> Likelihood</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="building-trees.html"><a href="building-trees.html#visualizing-trees"><i class="fa fa-check"></i><b>8.3</b> Visualizing trees</a></li>
<li class="chapter" data-level="8.4" data-path="building-trees.html"><a href="building-trees.html#what-does-my-tree-mean"><i class="fa fa-check"></i><b>8.4</b> What does my tree mean?</a></li>
<li class="chapter" data-level="8.5" data-path="building-trees.html"><a href="building-trees.html#other-tree-building-methods"><i class="fa fa-check"></i><b>8.5</b> Other tree building methods</a></li>
<li class="chapter" data-level="8.6" data-path="building-trees.html"><a href="building-trees.html#alternative-methods-of-support"><i class="fa fa-check"></i><b>8.6</b> Alternative methods of support</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>9</b> Results</a>
<ul>
<li class="chapter" data-level="9.1" data-path="results.html"><a href="results.html#what-does-your-tree-tell-you"><i class="fa fa-check"></i><b>9.1</b> What does your tree tell you?</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="sharing-your-results.html"><a href="sharing-your-results.html"><i class="fa fa-check"></i><b>10</b> Sharing your results</a>
<ul>
<li class="chapter" data-level="10.1" data-path="sharing-your-results.html"><a href="sharing-your-results.html#presentation"><i class="fa fa-check"></i><b>10.1</b> Presentation</a></li>
<li class="chapter" data-level="10.2" data-path="sharing-your-results.html"><a href="sharing-your-results.html#writing-a-paper"><i class="fa fa-check"></i><b>10.2</b> Writing a paper</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="sharing-your-results.html"><a href="sharing-your-results.html#methods"><i class="fa fa-check"></i><b>10.2.1</b> Methods</a></li>
<li class="chapter" data-level="10.2.2" data-path="sharing-your-results.html"><a href="sharing-your-results.html#results-1"><i class="fa fa-check"></i><b>10.2.2</b> Results</a></li>
<li class="chapter" data-level="10.2.3" data-path="sharing-your-results.html"><a href="sharing-your-results.html#intro"><i class="fa fa-check"></i><b>10.2.3</b> Intro</a></li>
<li class="chapter" data-level="10.2.4" data-path="sharing-your-results.html"><a href="sharing-your-results.html#discussion"><i class="fa fa-check"></i><b>10.2.4</b> Discussion</a></li>
<li class="chapter" data-level="10.2.5" data-path="sharing-your-results.html"><a href="sharing-your-results.html#bibliography"><i class="fa fa-check"></i><b>10.2.5</b> Bibliography</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a>
<ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#research-ideas"><i class="fa fa-check"></i>Research Ideas</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="citation-tracker-exercise.html"><a href="citation-tracker-exercise.html"><i class="fa fa-check"></i>Citation Tracker Exercise</a></li>
<li class="chapter" data-level="" data-path="cheatsheet.html"><a href="cheatsheet.html"><i class="fa fa-check"></i>Cheatsheet</a></li>
<li class="chapter" data-level="" data-path="citations-using-timetree.html"><a href="citations-using-timetree.html"><i class="fa fa-check"></i>Citations using TimeTree</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Phylogenomics with SISRS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="getting-your-data" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Getting your data<a href="getting-your-data.html#getting-your-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="download" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Download<a href="getting-your-data.html#download" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Move into your data folder in the project drive
If you aren’t continuing from the last chapter you may need to use the full path to the folders you are working in.</li>
<li>You can use <code>pwd</code> to check which folder you are in.</li>
</ul>
<p>Our next step will be to download the data you want to work with onto Unity
First we need to create a <strong>script</strong> to make this happen.
A script is a detailed set of instructions for the computer to follow.
Your script is going to be a series of instructions to download files and put them in particular folders so you can access them.
We are going to use the program <code>nano</code>, which is a very simple text editor built into the system, to write this script.</p>
<ul>
<li>Type <code>nano download_data.sh</code>.</li>
</ul>
<p>Again, we have a command (i.e. run <code>nano</code>) followed by an argument (in this case the name of the file we are creating).
Notice how the file ends in <code>.sh</code>.
Just like you have files that end in <code>.xls</code> or <code>.doc</code> this tells the computer the file is a shell script.</p>
<p>Commands in your shell script are just like commands on the command line.
For each file you want to download type the following (separated by spaces) on a single line:</p>
<ul>
<li><p><code>wget</code></p></li>
<li><p>The ftp link (make sure it is not preceed by <a href="http://" class="uri">http://</a>)</p></li>
<li><p><code>-P</code></p></li>
<li><p>the scientific name (as one word without spaces)</p></li>
<li><p>Repeat with the second ftp link for the sample if it has one.</p></li>
<li><p>Repeat this process for each sample you want to download.</p></li>
<li><p>Make sure there is one ftp link per line - many samples come in pairs so check for two links separated by ; and place each link on a separate line (i.e. you may have two lines in your file for some of the lines in your spreadsheet)</p></li>
<li><p>Exit <code>nano</code> using <code>ctrl-x</code> and save your changes.</p></li>
</ul>
<p>There are many people doing work on the cluster so we need take advantage of the computing power of the cluster
so that each student in the class can run their analysis on a separate computer.
When you log in to the cluster you are on the “head node”.
From here you can submit jobs to run analyses on the other nodes attached to the cluster.
In order to communicate information about your job to the cluster you need to add the following lines to the beginning of your download script.
To reopen your file use the same <code>nano</code> command as before followed by the name of your file.
For an alternate example see the <a href="https://docs.unity.uri.edu/documentation/jobs/sbatch/">Unity guide</a>.</p>
<pre><code>#!/bin/bash
#SBATCH --job-name=&quot;download&quot;
#SBATCH --time=150:00:00  # walltime limit (HH:MM:SS)
#SBATCH --nodes=1   # number of nodes
#SBATCH --ntasks-per-node=2   # processor core(s) per node
#SBATCH --mail-user=&quot;rsschwartz@uri.edu&quot; 
#SBATCH --mail-type=ALL
#SBATCH -p uri-cpu  # Partition
#SBATCH --output=slurm_%x_%j.out
#SBATCH --error=slurm_%x_%j.err

cd $SLURM_SUBMIT_DIR
</code></pre>
<p>Try to decipher what these commands are communicating to the computer: informing it of the name of the job you have assigned, the amount of time to run, the number of computers you need to allocate, the number of cores on each computer, and your information so it can tell you when the job is done. Additionally, the job will output any errors and other information in files labeled with “slurm”, the job name, and the job number. If something goes wrong you can look at these files to find out.</p>
<ul>
<li>Replace the email address on the second-to-last line with yours.</li>
<li>Quit nano and save.</li>
<li>Submit your job as <code>sbatch download_data.sh</code>.</li>
<li>You can check whether your job is still running by typing <code>squeue</code> to list all running jobs. Check to see if your username and job are on the list.</li>
<li>You can also monitor the progress of your download by listing the contents of your <code>data</code> folder and the contents of the folders inside it. Type the command <code>ls</code> (as before) but followed by “flags” <code>-lh</code> and then the name of one of your species folders. This lists the contents of the folder with additional information. If you repeat this command while files are downloading you’ll be able to see the increasing size of files as they are downloaded.</li>
</ul>
<p>Note: you should also be able to read your <code>wget</code> commands:</p>
<ul>
<li><code>wget</code> is the command to get from the web</li>
<li>the ftp link is the necessary argument</li>
<li><code>-P</code> is a flag to indicate that what follows is the output directory (which comes next)</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="computational-skills.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="phylogenetic-markers.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/05-download.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
